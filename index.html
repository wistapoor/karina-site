<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Карина, ты передумала?</title>
<style>
  body {
    background-color: #ffe4e8; /* мягкий светло-розовый */
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 40px 20px;
    color: #5a3e1b;
    position: relative;
    min-height: 100vh;
    overflow-x: hidden;
  }
  h1, h2 {
    text-shadow: 2px 2px 6px #c38a1a;
  }
  #survey, #mainQuestion, #letter {
    max-width: 500px;
    margin: 20px auto;
    background: rgba(255, 240, 245, 0.9);
    border-radius: 15px;
    padding: 25px 20px;
    box-shadow: 0 0 15px rgba(195, 138, 26, 0.7);
  }
  button, #writeMe {
    background-color: #d38c00;
    border: none;
    padding: 12px 30px;
    margin: 15px 10px 0 10px;
    font-size: 1.2em;
    color: white;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    position: relative;
    text-decoration: none;
    display: inline-block;
  }
  button:hover, #writeMe:hover {
    background-color: #a86e00;
  }
  #noBtn {
    position: absolute;
  }
  #message {
    margin-top: 25px;
    font-size: 1.8em;
    text-shadow: 1px 1px 4px #c38a1a;
    min-height: 2.5em;
  }
  .hidden {
    display: none;
  }
  .heart {
    position: fixed;
    width: 40px;
    height: 40px;
    background: url('https://i.imgur.com/l9KzM1Z.png') no-repeat center center/contain;
    pointer-events: none;
    animation: flyUp 2s forwards ease-out;
    z-index: 1000;
  }
  @keyframes flyUp {
    0% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    50% {
      transform: translateY(-50px) scale(1.2);
    }
    100% {
      opacity: 0;
      transform: translateY(-150px) scale(0.5);
    }
  }
  #timerMessage {
    margin-top: 20px;
    font-size: 1.3em;
    color: #5a3e1b;
    text-shadow: 1px 1px 4px #c38a1a;
    min-height: 1.5em;
  }
  #letter p {
    font-size: 1.1em;
    line-height: 1.5;
    margin-top: 10px;
    color: #5a3e1b;
    text-shadow: 1px 1px 4px #c38a1a;
  }
</style>
</head>
<body>

<h1>Привет, Карина!</h1>

<div id="survey">
  <h2>Несколько вопросов перед важным</h2>
  <div id="q1">
    <p>1. Как ты себя чувствуешь сегодня?</p>
    <button data-answer="Хорошо">Хорошо</button>
    <button data-answer="Не очень">Не очень</button>
  </div>
  <div id="q2" class="hidden">
    <p>2. Ты помнишь наши хорошие моменты?</p>
    <button data-answer="Да, очень">Да, очень</button>
    <button data-answer="Скорее нет">Скорее нет</button>
  </div>
  <div id="q3" class="hidden">
    <p>3. Ты готова дать мне шанс объясниться?</p>
    <button data-answer="Готова">Готова</button>
    <button data-answer="Еще не готова">Еще не готова</button>
  </div>
</div>

<div id="mainQuestion" class="hidden">
  <h2>Карина, ты передумала?</h2>
  <div id="buttons" style="position: relative; height: 60px;">
    <button id="yesBtn">Да</button>
    <button id="noBtn">Нет</button>
  </div>
  <div id="message"></div>
  <div id="timerMessage"></div>
  <a href="https://t.me/wistapoor_mng" target="_blank" id="writeMe" class="hidden">Напиши мне</a>
</div>

<div id="letter" class="hidden">
  <h2>Моё искреннее письмо</h2>
  <p>Карина, я хочу искренне извиниться за то, что наши отношения закончились плохо. Я очень сильно тебя люблю и хочу встретиться, чтобы всё исправить и начать заново.</p>
  <p>Я правда искренне сожалею за всё что было,</p>
  <p>Надеюсь ты всё таки меня простишь</p>
  <p>И всё будет хорошо!!</p>
</div>

<script>
  let userName = '';

  while (!userName) {
    userName = prompt('Пожалуйста, введи своё имя:');
    if (!userName) alert('Имя не может быть пустым!');
  }

  const survey = document.getElementById('survey');
  const mainQuestion = document.getElementById('mainQuestion');
  const letter = document.getElementById('letter');

  const q1 = document.getElementById('q1');
  const q2 = document.getElementById('q2');
  const q3 = document.getElementById('q3');

  const yesBtn = document.getElementById('yesBtn');
  const noBtn = document.getElementById('noBtn');
  const message = document.getElementById('message');
  const timerMessage = document.getElementById('timerMessage');
  const writeMe = document.getElementById('writeMe');

  let noClicks = 0;

  function nextQuestion(current, next) {
    current.classList.add('hidden');
    next.classList.remove('hidden');
  }

  survey.addEventListener('click', e => {
    if (e.target.tagName === 'BUTTON') {
      if (!q2.classList.contains('hidden')) {
        nextQuestion(q2, q3);
      } else if (!q3.classList.contains('hidden')) {
        survey.classList.add('hidden');
        mainQuestion.classList.remove('hidden');
        startTimer();
      } else {
        nextQuestion(q1, q2);
      }
    }
  });

  noBtn.style.position = 'absolute';
  noBtn.style.left = '50%';
  noBtn.style.top = '0';

  noBtn.addEventListener('click', () => {
    noClicks++;
    message.textContent = `Ты уже пыталась нажать "Нет" ${noClicks} раз, но я всё равно жду "Да"!`;

    const x = Math.floor(Math.random() * (window.innerWidth - noBtn.offsetWidth));
    const y = Math.floor(Math.random() * (window.innerHeight - noBtn.offsetHeight - 150)) + 50;
    noBtn.style.left = x + 'px';
    noBtn.style.top = y + 'px';

    if (noClicks === 2) {
      letter.classList.remove('hidden');
    }
  });

  yesBtn.addEventListener('click', (e) => {
    message.textContent = `УРАААААА наконец то, ${userName}!`;
    yesBtn.disabled = true;
    noBtn.disabled = true;

    letter.classList.remove('hidden');

    // Показываем ссылку "Напиши мне"
    writeMe.classList.remove('hidden');

    const heart = document.createElement('div');
    heart.classList.add('heart');
    heart.style.left = (e.clientX - 20) + 'px';
    heart.style.top = (e.clientY - 20) + 'px';
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 2000);
  });

  function startTimer() {
    setTimeout(() => {
      timerMessage.textContent = 'Карина, подумай хорошенько!';
    }, 10000);
  }
</script>

</body>
</html>
